import{d as y,r as i,x as _,L as V,a as m,o as k,c as p,t as w,A as B,b as s,w as E,u as N,M as F,H as T}from"./index-702e1de5.js";import{_ as A}from"./_plugin-vue_export-helper-361d09b5.js";const D={class:"card filter"},q={key:0,class:"title sle"},M=y({name:"TreeFilter"}),R=y({...M,props:{requestApi:null,data:null,title:null,id:{default:"id"},label:{default:"label"},multiple:{type:Boolean,default:!1},defaultValue:null},emits:["change"],setup(l,{emit:f}){const t=l,x={children:"children",label:t.label},d=i(""),r=i(),o=i([]);_(async()=>{var a;if((a=t.data)!=null&&a.length)return o.value=t.data;const{data:e}=await t.requestApi();if(t.multiple)return o.value=e;o.value=[{id:"",[t.label]:"\u5168\u90E8"},...e]}),V(d,e=>{r.value.filter(e)});const b=(e,a,n)=>{if(!e)return!0;let c=n.parent,u=[n.label],h=1;for(;h<n.level;)u=[...u,c.label],c=c.parent,h++;return u.some(C=>C.indexOf(e)!==-1)},v=e=>{t.multiple||f("change",e[t.id])},g=()=>{var e;f("change",(e=r.value)==null?void 0:e.getCheckedKeys())};return(e,a)=>{const n=m("el-input"),c=m("el-scrollbar");return k(),p("div",D,[l.title?(k(),p("h4",q,w(l.title),1)):B("",!0),s(n,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=u=>d.value=u),placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u8FDB\u884C\u8FC7\u6EE4",clearable:""},null,8,["modelValue"]),s(c,{style:T({height:l.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:E(()=>[s(N(F),{ref_key:"treeRef",ref:r,"default-expand-all":"","node-key":l.id,data:o.value,"show-checkbox":l.multiple,"check-strictly":!1,"current-node-key":l.multiple?"":l.defaultValue,"highlight-current":!l.multiple,"expand-on-click-node":!1,"check-on-click-node":l.multiple,props:x,"filter-node-method":b,"default-checked-keys":l.multiple?l.defaultValue:[],onNodeClick:v,onCheck:g},null,8,["node-key","data","show-checkbox","current-node-key","highlight-current","check-on-click-node","default-checked-keys"])]),_:1},8,["style"])])}}});const H=A(R,[["__scopeId","data-v-ddaeaac5"]]);export{H as T};
